define([""],function(e){!function(e){e.fn.clearSearch=function(a){var t=e.extend({clearClass:"clear_input",focusAfterClear:!0,linkText:"&times;"},a);return this.each(function(){function a(){n.val("").change(),c(),t.focusAfterClear&&n.focus(),"function"==typeof t.callback&&t.callback()}function c(){l()?s.show():s.hide(),r()}function l(){return n.val().replace(/^\s+|\s+$/g,"").length>0}function r(){var e=n.outerWidth(),a=n.outerHeight();s.css({top:a/2-s.height()/2,left:e-a/2-s.height()/2})}var s,n=e(this),o=t.clearClass+"_div";n.parent().hasClass(o)||(n.wrap('<div style="position: relative;" class="'+o+'"></div>'),n.after('<a style="position: absolute; cursor: pointer;" class="'+t.clearClass+'">'+t.linkText+"</a>")),s=n.next(),n.prop("autofocus")&&n.focus(),s.on("click",a),n.on("keyup keydown change focus",c),c()})}}(jQuery),$(function(){$(".clearable").clearSearch({callback:function(){l("cleared")}})}),$(function(){var e=document.getElementById("search-id"),a=localStorage.getItem("savedsearch");null!==a&&($("#search-id").attr("value",a),l(a+" searched"),$(".breadcrumb.style1 h1").text("搜尋結果 : "+a),l(e.value+" loaded"),$(".searchModal").addClass("active"),setTimeout(function(){$("#nav-header").addClass("headroom--pinned")},200)),e.value==a&&localStorage.removeItem("savedsearch"),$("form.search_form").on("submit",function(e){if(""==$.trim($("#search-id").val()))e.preventDefault(),$("#search-id").attr("placeholder","請輸入關鍵字").addClass("warning_search").val("").focus().blur();else{var a=document.getElementById("search-id");localStorage.setItem("savedsearch",a.value),l("set storage "+a.value)}})})});